@model PagedList.IPagedList<PayrollSystem.Models.RegularModel>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    ViewBag.Title = ViewBag.Action;
}
<style>
    .box {
        border-radius: 0px;
    }
</style>
<h3 class="text-default">Regular - ATM</h3>
<div class="box-tools pull-right">
    <!-- Buttons, labels, and many other things can be placed here! -->
    <!-- Here is a label for example -->
    <span><i class="glyphicon glyphicon-user"></i></span>
</div>
<div class="box box box-default">
    @using (Html.BeginForm("Regular", "Home", FormMethod.Get, new { @class = "navbar-form" }))
    {

        <div class="input-group add-on">
            <input class="form-control" placeholder="Search" name="search" value="@ViewBag.Search" id="srch-term" type="text">
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </div>
        </div>
    }
    <!-- /.box-header -->
    <div class="box-body">

        <table class="table table-striped">
            <tr>
                <th>ID NO</th>
                <th>FIRST NAME</th>
                <th>MIDDLE NAME</th>
                <th>LASTNAME</th>
                <th>DESIGNATION</th>
                <th>SALARY</th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td class="@item.ID">
                        @Html.DisplayFor(modelItem => item.ID)
                    </td>
                    <td class="@item.ID">
                        @Html.DisplayFor(modelItem => item.Firstname)
                    </td>
                    <td class="@item.ID">
                        @Html.DisplayFor(modelItem => item.Middlename)
                    </td>
                    <td class="@item.ID">
                        @Html.DisplayFor(modelItem => item.Lastname)
                    </td>
                    <td class="@item.ID">
                        @Html.DisplayFor(modelItem => item.Designation)
                    </td>
                    <td class="@item.ID">
                        @Html.DisplayFor(modelItem => item.Salary)
                    </td>
                    <td class="hidden">
                        @item.CfiFormat()
                    </td>
                    <td class="hidden">
                        @item.GsisConsoLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.GsisPolicyLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.GsisEmlLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.GsisUoliLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.GsisEduLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.GsisHelpLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.RelFormat()
                    </td>
                    <td class="hidden">
                        @item.PagibigLoanFormat()
                    </td>
                    <td class="hidden">
                        @item.PagibigMp2Format()
                    </td>
                    <td class="hidden">
                        @item.SimcFormat()
                    </td>
                    <td class="hidden">
                        @item.HwmpcFormat()
                    </td>
                    <td class="hidden">
                        @item.DbpFormat()
                    </td>
                    <td class="hidden">
                        @item.DisallowancesFormat()
                    </td>
                    <td class="hidden">
                        @item.GetTax()
                    </td>
                    <td>
                        <button class="btn btn-xs btn-success create_regular_payroll"><i class="glyphicon glyphicon-plus-sign"></i></button>
                        <button class="btn btn-xs btn-success view_payroll_list"><i class="glyphicon glyphicon-info-sign"></i></button>
                    </td>
                </tr>
            }
        </table>
    </div>
    <!-- /.box-body -->
    <div class="box-footer">
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
        @Html.PagedListPager(Model, page => Url.Action("Regular", new { page, search = ViewBag.Search }))
    </div>
</div>

<div class="row">
    <div class="col-md-7">

        <div class="box box box-default hide" id="box_create_payroll">
            <div class="box-header with-border">
                <h1 class="box-title"><b>Create Payroll</b></h1>
                <div class="box-tools pull-right">
                    <button class="btn btn-xs btn-danger remove_regular_payroll"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </div>
            <div class="box-body" id="jo_create_payroll">

                <input type="text" class="hidden" id="regular_date_range" />
                <input type="text" class="hidden" id="regular_id" name="regular_id" />
                <input type="text" class="hidden" id="regular_name" name="regular_name" />


                <div class="row">
                    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                        <div class="form-group">
                            <label>Month</label>
                            <select name="regular_month" id="regular_month" class="form-control" required>
                                <option value="0">Select Month</option>
                                <option value="1">January</option>
                                <option value="2">Februrary</option>
                                <option value="3">March</option>
                                <option value="4">April</option>
                                <option value="5">May</option>
                                <option value="6">June</option>
                                <option value="7">July</option>
                                <option value="8">August</option>
                                <option value="9">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                        <div class="form-group">
                            <label>Year</label>
                            <select name="regular_year" id="regular_year" class="form-control" required>
                                <option value="0">Select Year</option>
                                @for (int i = 2018; i <= DateTime.Now.Year; i++)
                                {
                                    <option value="@i">@i</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
    <!--HIDDEN-->
                <div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Monthly Rate</label>
                                <input type="text" name="regular_salary" id="regular_salary" class="form-control input-data" value="@Session["Salary"]" required readonly />
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>PERA</label>
                                <input type="text" class="form-control input-data" id="regular_pera" name="regular_pera" value="0.00" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Working Days</label>
                                <input type="text" class="form-control input-data" id="regular_working_days" name="regular_working_days" value="0" required>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Minutes (Late/Undertime)</label>
                                <input type="text" id="regular_minutes_late" name="regular_minutes_late" class="form-control input-data" value="0" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Absent Days</label>
                                <input type="text" class="form-control" id="regular_absent_date" name="regular_absent_date" placeholder="Choose Date" readonly />
                                <input type="text" class="form-control hidden" id="regular_absent_date_list" name="regular_absent_date_list" />
                            </div>
                            <div class="form-group">
                                <table id="regular_date_list" name="regular_date_list" class="table table-hover"></table>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Deduction(Late/Undertime/Absent)</label>
                                <input type="text" class="form-control" id="regular_deduction" name="regular_deduction" value="0.00" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="create_payroll_spinner hidden">
                        <div class="cold-md-12">
                            <center><img src="@Url.Content("~/Images/spin.gif")" width="150" style="padding:20px;"></center>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Net Amount</label>
                                <input type="text" class="form-control" id="regular_net_amount" name="regular_net_amount" value="0.00" readonly />
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                   <td>
                                       <div class="form-group">
                                           <label>Tax</label>
                                           <div class="input-group add-on">
                                               <input type="text" class="form-control input-data" id="regular_tax" name="regular_tax" value="0.00" required readonly />
                                               <div class="input-group-btn">
                                                   <button class="btn btn-success" style="float:left;" id="edit_tax" value="tax" type="button"><i id="tax_icon" class="glyphicon glyphicon-pencil"></i></button>
                                               </div>
                                           </div>
                                       </div>
                                   </td>
                                </tr>
                            </table>
                           
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>CFI</label>
                                            <input type="text" class="form-control" id="regular_cfi" name="regular_cfi" readonly required />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_cfi_payment" name="regular_cfi_payment" readonly required />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_cfi_paid" name="regular_cfi_paid" readonly required />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_cfi" type="button" value="cfi"><i id="cfi_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>GSIS - Premium</label>
                                <input type="text" class="form-control input-data" id="regular_gsis_premium" name="regular_gsis_premium" value="0.00" required readonly />
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>GSIS - Consoloan</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_consoloan" name="regular_gsis_consoloan" readonly required />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_gsis_consoloan_payment" name="regular_gsis_consoloan_payment" readonly required />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_gsis_consoloan_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_gsis_consoloan" type="button" value="gsis_consoloan"><i id="gsis_consoloan_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>GSIS - Policy Loan</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_policyloan" name="regular_gsis_policyloan" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_gsis_policyloan_payment" name="regular_gsis_policyloan_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_gsis_policyloan_paid" name="regular_gsis_policyloan_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_gsis_policyloan" value="gsis_policyloan" type="button"><i id="gsis_policyloan_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>GSIS - EML</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_eml" name="regular_gsis_eml" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_gsis_eml_payment" name="regular_gsis_eml_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_gsis_eml_paid" name="regular_gsis_eml_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_gsis_eml" value="gsis_eml" type="button"><i id="gsis_eml_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>GSIS - UOLI</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_uoli" name="regular_gsis_uoli" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_gsis_uoli_payment" name="regular_gsis_uoli_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_gsis_uoli_paid" name="regular_gsis_uoli_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_gsis_uoli" value="gsis_uoli" type="button"><i id="gsis_uoli_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>GSIS - EDU ASST</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_edu" name="regular_gsis_edu" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_gsis_edu_payment" name="regular_gsis_edu_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_gsis_edu_paid" name="regular_gsis_edu_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_gsis_edu" value="gsis_edu" type="button"><i id="gsis_edu_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>GSIS - HELP</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_help" name="regular_gsis_help" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_gsis_help_payment" name="regular_gsis_help_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_gsis_help_paid" name="regular_gsis_help_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_gsis_help" value="gsis_help" type="button"><i id="gsis_help_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>REL</label>
                                            <input type="text" class="form-control input-data" id="regular_gsis_rel" name="regular_gsis_rel" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_rel_payment" name="regular_rel_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_rel_paid" name="regular_rel_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_rel" value="rel" type="button"><i id="rel_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Pagibig - Premium</label>
                                <input type="text" class="form-control input-data" id="regular_pagibig_premium" name="regular_pagibig_premium" value="0.00" required />
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>Pagibig - Loan</label>
                                            <input type="text" class="form-control input-data" id="regular_pagibig_loan" name="regular_pagibig_loan" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_pagibig_loan_payment" name="regular_pagibig_loan_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_pagibig_loan_paid" name="regular_pagibig_loan_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_pagibig_loan" value="pagibig_loan" type="button"><i id="pagibig_loan_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>Pagibig - MP2</label>
                                            <input type="text" class="form-control input-data" id="regular_pagibig_mp2" name="regular_pagibig_mp2" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_pagibig_mp2_payment" name="regular_pagibig_mp2_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_pagibig_mp2_paid" name="regular_pagibig_mp2_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_pagibig_mp2" value="pagibig_mp2" type="button"><i id="pagibig_mp2_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label>Philhealth</label>
                                <input type="text" class="form-control input-data" id="regular_philhealth" name="regular_philhealth" value="0.00" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>SIMC</label>
                                            <input type="text" class="form-control input-data" id="regular_simc" name="regular_simc" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_simc_payment" name="regular_simc_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_simc_paid" name="regular_simc_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_simc" value="simc" type="button"><i id="simc_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>HWMPC</label>
                                            <input type="text" class="form-control input-data" id="regular_coop" name="regular_coop" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_coop_payment" name="regular_coop_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_coop_paid" name="regular_coop_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_coop" value="coop" type="button"><i id="coop_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>DBP</label>
                                            <input type="text" class="form-control input-data" id="regular_dbp" name="regular_dbp" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_dbp_payment" name="regular_dbp_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_dbp_paid" name="regular_dbp_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_dbp" value="dbp" type="button"><i id="dbp_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <table>
                                <tr>
                                    <td>
                                        <div class="form-group">
                                            <label>Disallowances</label>
                                            <input type="text" class="form-control input-data" id="regular_disallowance" name="regular_disallowance" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Payment</label>
                                            <input type="text" class="form-control" id="regular_disallowance_payment" name="regular_disallowance_payment" required readonly />
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group">
                                            <label>No. Paid</label>
                                            <div class="input-group add-on">
                                                <input type="text" class="form-control input-data" id="regular_disallowance_paid" name="regular_disallowance_paid" required readonly />
                                                <div class="input-group-btn">
                                                    <button class="btn btn-success" id="edit_disallowance" value="disallowance" type="button"><i id="disallowance_icon" class="glyphicon glyphicon-pencil"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                        <div class="form-group">
                            <label>Total Deductions</label>
                            <input type="text" class="form-control input-data" id="regular_total_deductions" name="regular_total_deductions" value="0.00" required readonly />
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                        <div class="form-group">
                            <label>Net Pay</label>
                            <input type="text" class="form-control input-data" id="regular_total_amount" name="regular_total_amount" value="0.00" required readonly />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-md-offset-4 col-sm-4 col-sm-offset-4 col-xs-4 col-xs-offset-4">
                        <button type="button" class="btn btn-primary form-control" id="regular_save" value="Save">Save</button>
                    </div>
                </div>


            </div>

        </div>

    </div>
    <div class="col-md-5">
        <div class="box box box-default hide" id="box_regular_payroll_list">
            <div class="box-header with-border">
                <h1 class="box-title"><b>Payroll List</b></h1>
                <div class="box-tools pull-right">
                    <button class="btn btn-xs btn-danger remove_regular_payroll_list"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </div>
            <div class="box-body">
                <div class="parent-payroll-list">

                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script>

        $(document).ready(function () {


            $('.remove_regular_payroll').click(function () {
                $('#box_create_payroll').addClass("hide");
            });

            $('.remove_regular_payroll_list').click(function () {
                $('#box_regular_payroll_list').addClass("hide");
            });

            $('.create_regular_payroll').click(function () {

                var id = $(this).closest('tr').find('td:eq(0)').text().trim();
                var firstname = $(this).closest('tr').find('td:eq(1)').text().trim();
                var middlename = $(this).closest('tr').find('td:eq(2)').text().trim();
                var lastname = $(this).closest('tr').find('td:eq(3)').text().trim();
                var fullname = firstname + " " + middlename + " " + lastname;
                var salary = $(this).closest('tr').find('td:eq(5)').text().trim();
                var tax = $(this).closest('tr').find('td:eq(20)').text().trim();

                var cfi = $(this).closest('tr').find('td:eq(6)').text().trim();
                var gsis_consoloan = $(this).closest('tr').find('td:eq(7)').text().trim();
                var gsis_policyloan = $(this).closest('tr').find('td:eq(8)').text().trim();
                var gsis_eml = $(this).closest('tr').find('td:eq(9)').text().trim();
                var gsis_uoli = $(this).closest('tr').find('td:eq(10)').text().trim();
                var gsis_edu = $(this).closest('tr').find('td:eq(11)').text().trim();
                var gsis_help = $(this).closest('tr').find('td:eq(12)').text().trim();
                var rel = $(this).closest('tr').find('td:eq(13)').text().trim();
                var pagibig_loan = $(this).closest('tr').find('td:eq(14)').text().trim();
                var pagibig_mp2 = $(this).closest('tr').find('td:eq(15)').text().trim();
                var simc = $(this).closest('tr').find('td:eq(16)').text().trim();
                var hwmpc = $(this).closest('tr').find('td:eq(17)').text().trim();
                var dbp = $(this).closest('tr').find('td:eq(18)').text().trim();
                var disallowance = $(this).closest('tr').find('td:eq(19)').text().trim();
              
                $(".selected").removeClass("selected");
                $("." + id).addClass("selected");

                $('#box_create_payroll').removeClass("hide");

                $("#regular_id").val(id);
                $("#regular_name").val(fullname);
                $("#regular_salary").val(formatComma(salary));
                $("#regular_tax").val(formatComma(tax));
                $("#regular_cfi").val(formatComma(cfi.split('/')[0]));
                $("#regular_cfi_payment").val(cfi.split('/')[1]);
                $("#regular_cfi_paid").val(cfi.split('/')[2]);
                $("#regular_gsis_consoloan").val(formatComma(gsis_consoloan.split('/')[0]));
                $("#regular_gsis_consoloan_payment").val(gsis_consoloan.split('/')[1]);
                $("#regular_gsis_consoloan_paid").val(gsis_consoloan.split('/')[2]);
                $("#regular_gsis_policyloan").val(formatComma(gsis_policyloan.split('/')[0]));
                $("#regular_gsis_policyloan_payment").val(gsis_policyloan.split('/')[1]);
                $("#regular_gsis_policyloan_paid").val(gsis_policyloan.split('/')[2]);
                $("#regular_gsis_eml").val(formatComma(gsis_eml.split('/')[0]));
                $("#regular_gsis_eml_payment").val(gsis_eml.split('/')[1]);
                $("#regular_gsis_eml_paid").val(gsis_eml.split('/')[2]);
                $("#regular_gsis_uoli").val(formatComma(gsis_uoli.split('/')[0]));
                $("#regular_gsis_uoli_payment").val(gsis_uoli.split('/')[1]);
                $("#regular_gsis_uoli_paid").val(gsis_uoli.split('/')[2]);
                $("#regular_gsis_edu").val(formatComma(gsis_edu.split('/')[0]));
                $("#regular_gsis_edu_payment").val(gsis_edu.split('/')[1]);
                $("#regular_gsis_edu_paid").val(gsis_edu.split('/')[2]);
                $("#regular_gsis_help").val(formatComma(gsis_help.split('/')[0]));
                $("#regular_gsis_help_payment").val(gsis_help.split('/')[1]);
                $("#regular_gsis_help_paid").val(gsis_help.split('/')[2]);
                $("#regular_gsis_rel").val(formatComma(rel.split('/')[0]));
                $("#regular_gsis_rel_payment").val(rel.split('/')[1]);
                $("#regular_gsis_rel_paid").val(rel.split('/')[2]);
                $("#regular_pagibig_loan").val(formatComma(pagibig_loan.split('/')[0]));
                $("#regular_pagibig_loan_payment").val(pagibig_loan.split('/')[1]);
                $("#regular_pagibig_loan_paid").val(pagibig_loan.split('/')[2]);
                $("#regular_pagibig_mp2").val(formatComma(pagibig_mp2.split('/')[0]));
                $("#regular_pagibig_mp2_payment").val(pagibig_mp2.split('/')[1]);
                $("#regular_pagibig_mp2_paid").val(pagibig_mp2.split('/')[2]);
                $("#regular_simc").val(formatComma(simc.split('/')[0]));
                $("#regular_simc_payment").val(simc.split('/')[1]);
                $("#regular_simc_paid").val(simc.split('/')[2]);
                $("#regular_coop").val(formatComma(hwmpc.split('/')[0]));
                $("#regular_coop_payment").val(hwmpc.split('/')[1]);
                $("#regular_coop_paid").val(hwmpc.split('/')[2]);
                $("#regular_dbp").val(formatComma(dbp.split('/')[0]));
                $("#regular_dbp_payment").val(dbp.split('/')[1]);
                $("#regular_dbp_paid").val(dbp.split('/')[2]);
                $("#regular_disallowance").val(formatComma(disallowance.split('/')[0]));
                $("#regular_disallowance_payment").val(disallowance.split('/')[1]);
                $("#regular_disallowance_paid").val(disallowance.split('/')[2]);
            });

            $("#regular_save").click(function () {
                var choosen_month = $("#regular_month").val();
                var choosen_year = $("#regular_year").val();
                if (choosen_month <= 9) choosen_month = "0" + choosen_month;

                if (choosen_month == "00" && choosen_year == "0") {
                    alert("Please specify the dates");
                    return;
                }

                var userid = $("#regular_id").val();
                var fullname = $("#regular_name").val();
                var month = $("#regular_month").val();
                var year = $("#regular_year").val();
                var salary = $("#regular_salary").val();
                var pera = $("#regular_pera").val();
                var working_days = $("#regular_working_days").val();
                var minutes_late = $("#regular_minutes_late").val();
                var absent_date_list = $("#regular_absent_date_list").val();

                var tax = $("#regular_tax").val();
                var cfi = $("#regular_cfi").val();
                var gsis_premium = $("#regular_gsis_premium").val();
                var gsis_consoloan = $("#regular_gsis_consoloan").val();
                var gsis_policyloan= $("#regular_gsis_policyloan").val();
                var gsis_eml = $("#regular_gsis_eml").val();
                var gsis_uoli = $("#regular_gsis_uoli").val();
                var gsis_edu = $("#regular_gsis_edu").val();
                var gsis_help = $("#regular_gsis_help").val();
                var gsis_rel = $("#regular_gsis_rel").val();
                var pagibig_premium = $("#regular_pagibig_premium").val();
                var pagibig_loan = $("#regular_pagibig_loan").val();
                var pagibig_mp2 = $("#regular_pagibig_mp2").val();
                var philhealth = $("#regular_philhealth").val();
                var simc = $("#regular_simc").val();
                var hwmpc = $("#regular_coop").val();
                var dbp = $("#regular_dbp").val();
                var disallowance = $("#regular_disallowance").val();

                var url = "@Url.Action("InsertRegularPayroll", "Home")";
                $.ajax({
                    url: url,
                    type: "POST",
                    data: {
                        userid: userid,
                        month: month,
                        year: year,
                        salary: removeComma(salary),
                        pera: removeComma(pera),
                        working_days: working_days,
                        minutes_late: minutes_late,
                        absent_date_list: absent_date_list,
                        tax: removeComma(tax),
                        cfi: removeComma(cfi),
                        gsis_premium: removeComma(gsis_premium),
                        gsis_consoloan: removeComma(gsis_consoloan),
                        gsis_policyloan: removeComma(gsis_policyloan),
                        gsis_eml: removeComma(gsis_eml),
                        gsis_uoli: removeComma(gsis_uoli),
                        gsis_edu: removeComma(gsis_edu),
                        gsis_help: removeComma(gsis_help),
                        gsis_rel: removeComma(gsis_rel),
                        pagibig_premium: removeComma(pagibig_premium),
                        pagibig_loan: removeComma(pagibig_loan),
                        pagibig_mp2: removeComma(pagibig_mp2),
                        philhealth: removeComma(philhealth),
                        simc: removeComma(simc),
                        hwmpc: removeComma(hwmpc),
                        dbp: removeComma(dbp),
                        disallowance: removeComma(disallowance)
                    },
                    success: function (flag) {
                        $.toast({
                            heading: 'Success',
                            text: 'New payroll added',
                            icon: 'success'
                        });
                        clearRegularForm();
                        var firstname = fullname.split(" ")[0];
                        var middlename = fullname.split(" ")[1];
                        var lastname = fullname.split(" ")[2];
                        loadRegularPayrollList(userid, firstname, lastname, middlename);
                        //  alert(flag);
                    }
                });

            });

            $("#edit_cfi,#edit_gsis_consoloan,#edit_gsis_policyloan,#edit_gsis_eml,#edit_gsis_uoli,#edit_gsis_edu,#edit_gsis_help,#edit_rel,#edit_pagibig_loan,#edit_pagibig_mp2,#edit_simc,#edit_coop,#edit_dbp,#edit_disallowance").click(function () {

                var type = $(this).val();

                var icon = $("#" + type + "_icon");

                if (icon.hasClass("glyphicon-pencil")) {

                    $("#regular_" + type + "").attr("readonly", false);
                    $("#regular_" + type + "_payment").attr("readonly", false);
                    $("#regular_" + type + "_paid").attr("readonly", false);

                    $("#" + type + "_icon").removeClass("glyphicon-pencil");
                    $("#" + type + "_icon").addClass("glyphicon-check");
                    return;

                } 

                if (icon.hasClass("glyphicon-check") || icon.hasClass("glyphicon-repeat")) {

                    var url = "@Url.Action("UpdateRemittance", "Home")";
                    var amount = $("#regular_" + type + "").val().replace(/,/g, '');
                    var payment = $("#regular_" + type + "_payment").val().replace(/,/g, '');
                    var paid = $("#regular_" + type + "_paid").val().replace(/,/g, '');
                    var emp_id = $("#regular_id").val();

                    $("#" + type + "_icon").removeClass("glyphicon-check");
                    $("#" + type + "_icon").removeClass("glyphicon-repeat");
                    $("#" + type + "_icon").addClass("fa fa-spinner fa-spin");

                    $.ajax({
                        url: url,
                        type: "POST",
                        data: {
                            table: type+"_remittance",
                            ID: 1,
                            UserID: emp_id,
                            MaxCount: payment,
                            Count: paid,
                            Amount:amount
                        },
                        success: function (flag) {
                            if (flag) {
                                $.toast({
                                    heading: 'Success',
                                    text: type.toUpperCase()+' updated successfully',
                                    icon: 'success'
                                });

                                $("#regular_" + type + "").attr("readonly", true);
                                $("#regular_" + type + "_payment").attr("readonly", true);
                                $("#regular_" + type + "_paid").attr("readonly", true);

                                $("#edit_" + type + "").removeClass("btn-danger");
                                $("#edit_" + type + "").addClass("btn-success");

                                $("#" + type + "_icon").removeClass("fa fa-spinner fa-spin");
                                $("#" + type + "_icon").addClass("glyphicon-pencil");
                            } else {
                                $.toast({
                                    heading: 'Error',
                                    text: 'Something went wrong, please try again.',
                                    icon: 'success'
                                });
                                $("#edit_" + type + "").removeClass("btn-success");
                                $("#edit_" + type + "").addClass("btn-danger");

                                $("#" + type + "_icon").removeClass("fa fa-spinner fa-spin");
                                $("#" + type + "_icon").addClass("glyphicon-repeat");
                            }  
                        }
                    });
                    return;
                } 
            });

            $("#edit_tax").click(function () {

                var type = $(this).val();

                var icon = $("#" + type + "_icon");

                if (icon.hasClass("glyphicon-pencil")) {

                    $("#regular_" + type + "").attr("readonly", false);

                    $("#" + type + "_icon").removeClass("glyphicon-pencil");
                    $("#" + type + "_icon").addClass("glyphicon-check");
                    return;

                } 

                if (icon.hasClass("glyphicon-check") || icon.hasClass("glyphicon-repeat")) {

                    var url = "@Url.Action("UpdateTax", "Home")";
                    var amount = $("#regular_" + type + "").val().replace(/,/g, '');
                    var emp_id = $("#regular_id").val();

                    $("#" + type + "_icon").removeClass("glyphicon-check");
                    $("#" + type + "_icon").removeClass("glyphicon-repeat");
                    $("#" + type + "_icon").addClass("fa fa-spinner fa-spin");

                    $.ajax({
                        url: url,
                        type: "POST",
                        data: {
                            UserID: emp_id,
                            Amount:amount
                        },
                        success: function (flag) {
                            if (flag) {
                                $.toast({
                                    heading: 'Success',
                                    text: type.toUpperCase()+' updated successfully',
                                    icon: 'success'
                                });

                                $("#regular_" + type + "").attr("readonly", true);

                                $("#edit_" + type + "").removeClass("btn-danger");
                                $("#edit_" + type + "").addClass("btn-success");

                                $("#" + type + "_icon").removeClass("fa fa-spinner fa-spin");
                                $("#" + type + "_icon").addClass("glyphicon-pencil");
                            } else {
                                $.toast({
                                    heading: 'Error',
                                    text: 'Something went wrong, please try again.',
                                    icon: 'success'
                                });
                                $("#edit_" + type + "").removeClass("btn-success");
                                $("#edit_" + type + "").addClass("btn-danger");

                                $("#" + type + "_icon").removeClass("fa fa-spinner fa-spin");
                                $("#" + type + "_icon").addClass("glyphicon-repeat");
                            }  
                        }
                    });
                    return;
                } 
            });
            
            $('.view_payroll_list').click(function () {

                $('#box_regular_payroll_list').removeClass("hide");
                $(".parent-payroll-list").html("Loading......");

                var empID = $(this).closest('tr').find('td:eq(0)').text().trim();

                var firstname = $(this).closest('tr').find('td:eq(1)').text().trim();
                var middlename = $(this).closest('tr').find('td:eq(2)').text().trim();
                var lastname = $(this).closest('tr').find('td:eq(3)').text().trim();

                $(".selected").removeClass("selected");

                $("." + empID).addClass("selected");

                $("#emp_id").val(empID);
                $("#fullname").val(firstname + " " + middlename + " " + lastname);

                loadRegularPayrollList(empID, firstname, lastname, middlename);

            });

            $("#regular_month, #regular_year").change(function () {
                var choosen_month = $("#regular_month").val();
                var choosen_year = $("#regular_year").val();
                if (choosen_month <= 9) choosen_month = "0" + choosen_month;

                if (choosen_month != "00" && choosen_year != "0") {
                    var id = $("#regular_id").val();
                    var from = choosen_year + "-" + choosen_month + "-01";
                    var to = choosen_year + "-" + choosen_month + "-" + daysInMonth(parseInt(choosen_month), choosen_year);

                    $("#regular_date_range").val(choosen_month + "/01/" + choosen_year + "-" + choosen_month + "/" + daysInMonth(parseInt(choosen_month), choosen_year) + "/" + choosen_year);
                    getLateAndAbsences(id, from, to);
                }

            });

            $("#regular_working_days, #regular_minutes_late").change(function () {
                ComputeDeductions();
            });

            $("#regular_pera").change(function () {
                $(this).val(formatComma(roundOff($(this).val())));
                ComputeDeductions();
                ComputeTotalNetPay();
            });

            $("#regular_absent_date").datepicker().change(function () {

                var choosen_date = $("#regular_absent_date").val();

                var array_date = ($("#regular_absent_date_list").val().length === 0) ? [] : $("#regular_absent_date_list").val().split(',');


                var item = parseInt(choosen_date.split('/')[0]) + "/" + parseInt(choosen_date.split('/')[1]) + "/" + parseInt(choosen_date.split('/')[2]);

                var tr_id = $("#regular_date_list").children().length;

                var date_item = "<tr class = 'row-data'><td>";
                date_item += item;
                date_item += "</td><td><span class = 'glyphicon glyphicon-remove remove-date' id='" + tr_id + "' value = '"+tr_id+"' style = 'color:red;cursor:pointer;' ></span></td></tr>";

                array_date.push(item);

                $("#regular_date_list").append(date_item);
                $("#regular_absent_date_list").val(array_date);
                $("#regular_absent_date").val("");

                ComputeDeductions();
                ComputeTotalNetPay();
            });

            $(".row-data").on("click", ".remove-date", function () {
                alert("ASDSDADSADSD");
            });
        });

        function loadRegularPayrollList(page,empID,firstname,lastname) {
                

            var url = "@Url.Action("RegularPayrollList", "PartialView")";

            alert(page +" "+empID+" "+firstname+" "+lastname);
            $(".parent-payroll-list").html("Loading data ...");
                
            $.ajax({
                url: url,
                type: "POST",
                data: {
                    page: page,
                    empID:empID,
                    firstname: firstname,
                    lastname: lastname,
                    middlename:""
                },
                success: function (html) {
                    $(".parent-payroll-list").html(html);
                }
            });
        }

        function removeItem(id) {
            alert('hd');
              
                var tr = $("#" + id).closest('tr');
                var value = tr.find('td:eq(0)').text();

                tr.remove();

                var array_date = $("#regular_absent_date_list").val().split(',');


                for (var i = array_date.length - 1; i >= 0; i--) {

                    if (array_date[i] === value) {
                        array_date.splice(i, 1);
                        break;
                    }
                }

                $("#regular_absent_date_list").val(array_date);

                ComputeDeductions();
                ComputeTotalNetPay();

            }

            function clearRegularForm() {
                $("#regular_pera").val("0.00");
                $("#regular_minutes_late").val("0");
                $("#regular_absent_date_list").val("");
                $("#regular_date_list").empty();
                $("#regular_deduction").val("0.00");
                $("#regular_net_amount").val("0.00");
                $("#regular_total_deduction").val("0.00");
                $("#regular_total_amount").val("0.00");

            }

            function getLateAndAbsences(id, from, to)
            {
                $("#jo_create_payroll :input").attr("disabled", true);
                $(".create_payroll_spinner").removeClass("hidden");

                var url = "@Url.Action("GetMins","Home")";
                $.ajax({
                    url: url,
                    type: 'POST',
                    data:
                        {
                            "id": id,
                            "from":from,
                            "am_in": "08:00:00",
                            "am_out": "12:00:00",
                            "pm_in": "13:00:00",
                            "pm_out": "17:00:00",
                            "to": to
                        },
                    success: function (data) {
                        var array_date = [];
                        $("#jo_date_list").empty();
                        $("#jo_absent_date_list").val("");

                        var minutes_late = data.split(" ")[0];
                        var working_days = data.split(" ")[1];
                        var no_days_absent = data.split(" ")[2];
                      
                        $("#regular_working_days").val(working_days);

                        ComputeDeductions();
                        ComputeTotalNetPay();
               
                        $(".create_payroll_spinner").addClass("hidden");
                        $("#jo_create_payroll :input").attr("disabled", false);

                    }
                });
            }

            function ComputeDeductions() {

                var salary = $("#regular_salary").val().replace(/,/g, '');
                var working_days = $("#regular_working_days").val().replace(/,/g, '');
                var minutes_late = $("#regular_minutes_late").val().replace(/,/g, '');
                var no_days_absent = ($("#regular_absent_date_list").val().length >= 4) ? $("#regular_absent_date_list").val().split(",").length : 0;
                var pera = $("#regular_pera").val().replace(/,/g, '');
                var deduction = "0.00";

                deduction = ((+minutes_late + (480 * +no_days_absent)) * (((+salary / +working_days) / 8) / 60));

                if (isNaN(deduction) || !isFinite(deduction)) {
                    deduction = "0.00";
                }

                deduction = roundOff(deduction);
                $("#regular_deduction").val(formatComma(deduction));


                var net_amount = 0.00;
                net_amount = ((parseFloat(salary)) + parseFloat(pera)) - deduction;
                net_amount = roundOff(net_amount);

                $("#regular_net_amount").val(formatComma(net_amount));

            }

            function ComputeTotalNetPay() {

                var regular_tax = $("#regular_tax").val().replace(/,/g, '');
                var regular_cfi = $("#regular_cfi").val().replace(/,/g, '');
                var regular_gsis_premium = $("#regular_gsis_premium").val().replace(/,/g, '');
                var regular_gsis_consoloan = $("#regular_gsis_consoloan").val().replace(/,/g, '');
                var regular_gsis_policyloan = $("#regular_gsis_policyloan").val().replace(/,/g, '');
                var regular_gsis_eml = $("#regular_gsis_eml").val().replace(/,/g, '');
                var regular_gsis_uoli = $("#regular_gsis_uoli").val().replace(/,/g, '');
                var regular_gsis_edu = $("#regular_gsis_edu").val().replace(/,/g, '');
                var regular_gsis_help = $("#regular_gsis_help").val().replace(/,/g, '');
                var regular_gsis_rel = $("#regular_gsis_rel").val().replace(/,/g, '');
                var regular_pagibig_premium = $("#regular_pagibig_premium").val().replace(/,/g, '');
                var regular_pagibig_loan = $("#regular_pagibig_loan").val().replace(/,/g, '');
                var regular_pagibig_mp2 = $("#regular_pagibig_mp2").val().replace(/,/g, '');
                var regular_philhealth = $("#regular_philhealth").val().replace(/,/g, '');
                var regular_simc = $("#regular_simc").val().replace(/,/g, '');
                var regular_coop = $("#regular_coop").val().replace(/,/g, '');
                var regular_dbp = $("#regular_dbp").val().replace(/,/g, '');
                var regular_disallowance = $("#regular_disallowance").val().replace(/,/g, '');

                var regular_net_amount = $("#regular_net_amount").val().replace(/,/g, '');

                var total_deductions = roundOff(parseFloat(regular_tax) + parseFloat(regular_cfi) + parseFloat(regular_gsis_premium) + parseFloat(regular_gsis_consoloan) + parseFloat(regular_gsis_policyloan) +
                    parseFloat(regular_gsis_eml) + parseFloat(regular_gsis_uoli) + parseFloat(regular_gsis_edu) + parseFloat(regular_gsis_help) + parseFloat(regular_gsis_rel) + parseFloat(regular_pagibig_premium) +
                    parseFloat(regular_pagibig_loan) + parseFloat(regular_pagibig_mp2) + parseFloat(regular_philhealth) + parseFloat(regular_simc) + parseFloat(regular_coop) + parseFloat(regular_dbp) +
                    parseFloat(regular_disallowance));

                var total_amount = roundOff(parseFloat(regular_net_amount)  - total_deductions);

                $("#regular_total_deductions").val(formatComma(total_deductions));
                $("#regular_total_amount").val(formatComma(total_amount));
              
            }


            function loadRegularPayrollList(empID,firstname,lastname,middlename) {
                var url = "@Url.Action("RegularPayrollList", "PartialView")";
                $(".parent-payroll-list").html("Loading data ...");
                $.ajax({
                    url: url,
                    type: "POST",
                    data: {
                        page: 1,
                        empID: empID,
                        firstname: firstname,
                        lastname: lastname,
                        middlename: middlename
                    },
                    success: function (html) {  
                        $(".parent-payroll-list").html(html);  
                    }
                });
            }
    </script>
}