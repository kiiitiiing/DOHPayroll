@model PagedList.IPagedList<PayrollSystem.Models.JobOrder>
@using PagedList.Mvc;

    <table class="table table-striped table-bordered">
        <tr>
            <th>ID NO</th>
            <th>FIRST NAME</th>
            <th>LAST NAME</th>
            <th>FROM</th>
            <th>TO</th>
            <th></th>
        </tr>
        @foreach (var item in Model)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Employee.ID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Employee.Firstname)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Employee.Lastname)
                </td>
                <td>
                  @Html.DisplayFor(modelItem => item.StartDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EndDate)
                </td>
                <td>
                    @using (Html.BeginForm("CreateJoPayslip", "Report", FormMethod.Post))
                    {
                        <input type="hidden" name="fullname" value="@(item.Employee.Firstname+" "+item.Employee.Middlename+" "+item.Employee.Lastname)" />
                        <input type="hidden" name="designation" value="@item.Employee.Designation" />
                        <input type="hidden" name="date_from" value="@item.StartDate" />
                        <input type="hidden" name="date_to" value="@item.EndDate" />
                        <button class="btn btn-xs btn-success remove-details-container"><i class="glyphicon glyphicon-pencil"></i></button>
                        <button type="submit" name="id" formtarget="_blank" class="btn btn-xs btn-primary td-button" value="@item.Employee.ID"><i class="glyphicon glyphicon-book"></i></button>
                    }
                </td>
            </tr>
        }
    </table>
    <div class="box-footer-payroll-list">
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

        @Html.PagedListPager(Model, page => Url.Action("Index",
 new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
    </div>

    <script>

        $(document).ready(function () {
            $("body").on("click", ".box-footer-payroll-list li", function (e) {
                e.preventDefault();
                var page = $(this).text();

                var url = "@Url.Action("PayrollList", "PartialView")";

                $.ajax({
                    url: url,
                    type: "POST",
                    data: {
                        page: page,
                        empID:"",
                        firstname: "",
                        lastname: "",
                        middlename:""
                    },
                    success: function (html) {
                        $(".parent-payroll-list").html(html);
                        console.log(html);
                    }
                });

            });
        });
    </script>

    

